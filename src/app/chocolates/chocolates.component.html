<div *ngIf="dataRx.value() as response" class="p-6 max-w-7xl mx-auto">
  <p-dataview [value]="response.data">
    <ng-template #list let-items>
      <div class="grid sm:grid-cols-4 grid-cols-1 gap-4">
        <div *ngFor="let item of items; trackBy: trackByFn" class="relative">
          <div class="flex flex-col p-4 pt-8 gap-4 border rounded-lg border-surface-200 dark:border-surface-700 h-96">
            <div class="relative">
              <img
                class="block xl:block mx-auto rounded-border w-full"
                ngSrc="/assets/images/chocolates.jpg"
                [alt]="item.name"
                height="965"
                width="1500"
                priority
              />
            </div>

            <div class="flex flex-col md:flex-row justify-between  flex-1 gap-6">
              <div class="flex flex-row md:flex-col justify-between items-start gap-2">
                <div>
                  <div class="text-2xl font-bold text-surface-900 dark:text-surface-0 mt-2">{{ item.name }}</div>
                  <span class="font-medium text-lg text-neutral-400">{{ item.brand }}</span>
                </div>
              </div>

              <div class="flex flex-col md:items-end gap-8">
                <div class="flex p-2 items-center gap-2 absolute top-2 right-2">
                  <div class="border border-neutral-700 bg-neutral-600 py-1 px-2 rounded-sm text-sm">
                    100g
                  </div>

                  <div class="border border-green-800 bg-green-700 py-1 px-2 rounded-sm text-sm">
                    <span *ngIf="item.lowestPricePer100g; else priceNotSet">
                      {{ item.lowestPricePer100g | currency:item.currency:'symbol':'1.2-2' }}
                    </span>
                  </div>

                  <div class="border border-yellow-700 bg-yellow-600 py-1 px-2 rounded-sm text-sm">
                    <span *ngIf="item.averagePricePer100g; else priceNotSet">
                      {{ item.averagePricePer100g | currency:item.currency:'symbol':'1.2-2' }}
                    </span>
                  </div>
                  <ng-template #priceNotSet>
                    N/A
                  </ng-template>
                </div>

                <div class="flex flex-row-reverse md:flex-row gap-4 p-2 items-center absolute bottom-2 right-2">
                  <a [routerLink]="['/chocolate', item.id]">
                    <i class="pi pi-info-circle text-cyan-600 text-xl cursor-pointer hover:text-cyan-200"></i>
                  </a>
                  <a [href]="item.lowestPriceLink" target="_blank" rel="noopener noreferrer" class="p-button font-bold">
                    <i class="pi pi-shopping-cart text-xl"></i>
                    Buy now
                  </a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </ng-template>
  </p-dataview>
</div>


